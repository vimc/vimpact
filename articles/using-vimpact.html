<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Using vimpact for estimating vaccine impact • vimpact</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Using vimpact for estimating vaccine impact">
<meta property="og:description" content="vimpact">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">vimpact</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.10</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/internal-impact.html">Using vimpact for estimating vaccine impact - internal</a>
    </li>
    <li>
      <a href="../articles/using-vimpact.html">Using vimpact for estimating vaccine impact</a>
    </li>
    <li>
      <a href="../articles/vignette.html">Using vimpact for estimating vaccine impact - VIMC members</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="using-vimpact_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Using vimpact for estimating vaccine impact</h1>
                        <h4 data-toc-skip class="author">Rob Ashton, Xiang Li, Katy Gaythorpe</h4>
            
            <h4 data-toc-skip class="date">2022-09-23</h4>
      
      
      <div class="hidden name"><code>using-vimpact.Rmd</code></div>

    </div>

    
    
<p>This vignette describes how to use impact calculation methods used in VIMC as an external user.</p>
<div class="section level2">
<h2 id="data">Data<a class="anchor" aria-label="anchor" href="#data"></a>
</h2>
<p>The simplest possible example is a static model with constant routine immunisation and a one-off campaign. Burden estimates from a theoretical country are found in 3 csv titled <code>example_novax_burden.csv</code>, <code>example_routine_burden.csv</code> and <code>example_routine_campaign_burden.csv</code>. These include estimates of burden in years 1900 - 2100 and display the format used by the functions.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">example_novax</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/example_novax_burden.csv"</span>, package <span class="op">=</span> <span class="st">"vimpact"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">example_routine</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/example_routine_burden.csv"</span>, package <span class="op">=</span> <span class="st">"vimpact"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">example_routine_campaign</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/example_routine_campaign_burden.csv"</span>, package <span class="op">=</span> <span class="st">"vimpact"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">example_novax</span><span class="op">)</span></span>
<span><span class="co">#&gt; 'data.frame':    10201 obs. of  6 variables:</span></span>
<span><span class="co">#&gt;  $ country       : chr  "ABC" "ABC" "ABC" "ABC" ...</span></span>
<span><span class="co">#&gt;  $ year          : int  2000 2000 2000 2000 2000 2000 2000 2000 2000 2000 ...</span></span>
<span><span class="co">#&gt;  $ age           : int  0 1 2 3 4 5 6 7 8 9 ...</span></span>
<span><span class="co">#&gt;  $ value         : int  16 15 14 13 13 12 12 11 11 10 ...</span></span>
<span><span class="co">#&gt;  $ activity_type : chr  "novax" "novax" "novax" "novax" ...</span></span>
<span><span class="co">#&gt;  $ burden_outcome: chr  "deaths" "deaths" "deaths" "deaths" ...</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">example_routine</span><span class="op">)</span></span>
<span><span class="co">#&gt; 'data.frame':    10201 obs. of  6 variables:</span></span>
<span><span class="co">#&gt;  $ country       : chr  "ABC" "ABC" "ABC" "ABC" ...</span></span>
<span><span class="co">#&gt;  $ year          : int  2000 2000 2000 2000 2000 2000 2000 2000 2000 2000 ...</span></span>
<span><span class="co">#&gt;  $ age           : int  0 1 2 3 4 5 6 7 8 9 ...</span></span>
<span><span class="co">#&gt;  $ value         : int  16 15 14 13 13 12 12 11 11 10 ...</span></span>
<span><span class="co">#&gt;  $ activity_type : chr  "routine" "routine" "routine" "routine" ...</span></span>
<span><span class="co">#&gt;  $ burden_outcome: chr  "deaths" "deaths" "deaths" "deaths" ...</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">example_routine_campaign</span><span class="op">)</span></span>
<span><span class="co">#&gt; 'data.frame':    10201 obs. of  6 variables:</span></span>
<span><span class="co">#&gt;  $ country       : chr  "ABC" "ABC" "ABC" "ABC" ...</span></span>
<span><span class="co">#&gt;  $ year          : int  2000 2000 2000 2000 2000 2000 2000 2000 2000 2000 ...</span></span>
<span><span class="co">#&gt;  $ age           : int  0 1 2 3 4 5 6 7 8 9 ...</span></span>
<span><span class="co">#&gt;  $ value         : int  16 15 14 13 13 12 12 11 11 10 ...</span></span>
<span><span class="co">#&gt;  $ activity_type : chr  "campaign" "campaign" "campaign" "campaign" ...</span></span>
<span><span class="co">#&gt;  $ burden_outcome: chr  "deaths" "deaths" "deaths" "deaths" ...</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="impact-by-calendar-year-cross-sectional-impact">Impact by calendar year (cross-sectional impact)<a class="anchor" aria-label="anchor" href="#impact-by-calendar-year-cross-sectional-impact"></a>
</h2>
<p>Impact by calendar year calculates impact accrued over all ages for a specific year. This calculates the difference in disease burden between baseline and focal scenarios for a given year.</p>
<p>To use this method you need to provide a data frame of baseline impact and a data frame of focal impact for the vaccine of interest for a given age, year and country.</p>
<p>These data frames must contain columns for country, burden_outcome (e.g. cases, deaths, DALYs), year, age and value. It will sum the values over all ages for each year and return the impact as the difference between baseline and focal scenarios for each group.</p>
<p>If the baseline and focal impact data contains groups which do not overlap then this will return impact only for groups contained in both datasets.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">calendar_year</span> <span class="op">&lt;-</span> <span class="fu">vimpact</span><span class="fu">::</span><span class="fu"><a href="../reference/impact_by_calendar_year.html">impact_by_calendar_year</a></span><span class="op">(</span>baseline_burden <span class="op">=</span> <span class="va">example_novax</span>, focal_burden <span class="op">=</span> <span class="va">example_routine_campaign</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">calendar_year</span><span class="op">)</span></span>
<span><span class="co">#&gt; tibble [101 × 4] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;  $ country       : chr [1:101] "ABC" "ABC" "ABC" "ABC" ...</span></span>
<span><span class="co">#&gt;  $ burden_outcome: chr [1:101] "deaths" "deaths" "deaths" "deaths" ...</span></span>
<span><span class="co">#&gt;  $ year          : int [1:101] 2000 2001 2002 2003 2004 2005 2006 2007 2008 2009 ...</span></span>
<span><span class="co">#&gt;  $ impact        : int [1:101] 0 0 0 0 0 3 11 18 27 35 ...</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="impact-by-birth-year-lifetime-impact">Impact by birth year (lifetime impact)<a class="anchor" aria-label="anchor" href="#impact-by-birth-year-lifetime-impact"></a>
</h2>
<p>When calculating impact by birth year we account for the long-term impact of vaccination by finding the sum of the difference in burden between focal and baseline scenarios over the lifetime of a particular cohort. This can be written as <span class="math inline">\(D(c, k) = \sum_{y-a=k}D_{b-f}(a, c, y)\)</span> where <span class="math inline">\(y \in Y_{m}\)</span> and <span class="math inline">\(a \in A_{m}\)</span> where <span class="math inline">\(D\)</span> is the difference in burden, <span class="math inline">\(b\)</span> is baseline, <span class="math inline">\(f\)</span> is focal, <span class="math inline">\(a\)</span> is age, <span class="math inline">\(c\)</span> is country, <span class="math inline">\(y\)</span> is year, <span class="math inline">\(k\)</span> is birth cohort, <span class="math inline">\(Y_{m}\)</span> are the years modelled and <span class="math inline">\(A_{m}\)</span> are the ages modelled. This requires the same data as <code>impact_by_calendar_year</code>. You need to provide data frames containing baseline and focal impact for the vaccine of interest for a given age, year and country.</p>
<p>These data frames must contain columns for country, burden_outcome (e.g. cases, deaths, DALYs), year, age and value. It will sum the impact grouped by country, burden_outcome, and birth year. Where birth year is <code>year - age</code>. Then calculates the impact for these groups.</p>
<p>If the baseline and focal impact data contains groups which do not overlap then this will return impact only for groups contained in both datasets.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">birth_year</span> <span class="op">&lt;-</span> <span class="fu">vimpact</span><span class="fu">::</span><span class="fu"><a href="../reference/impact_by_birth_year.html">impact_by_birth_year</a></span><span class="op">(</span>baseline_burden <span class="op">=</span> <span class="va">example_novax</span>, focal_burden <span class="op">=</span> <span class="va">example_routine_campaign</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">birth_year</span><span class="op">)</span></span>
<span><span class="co">#&gt; tibble [201 × 4] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;  $ country       : chr [1:201] "ABC" "ABC" "ABC" "ABC" ...</span></span>
<span><span class="co">#&gt;  $ burden_outcome: chr [1:201] "deaths" "deaths" "deaths" "deaths" ...</span></span>
<span><span class="co">#&gt;  $ birth_cohort  : int [1:201] 1900 1901 1902 1903 1904 1905 1906 1907 1908 1909 ...</span></span>
<span><span class="co">#&gt;  $ impact        : int [1:201] 0 0 0 0 0 0 0 0 0 0 ...</span></span></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">birth_year</span><span class="op">$</span><span class="va">year</span> <span class="op">&lt;-</span> <span class="va">birth_year</span><span class="op">$</span><span class="va">birth_cohort</span></span>
<span><span class="va">birth_year</span><span class="op">$</span><span class="va">impact_birth_year</span> <span class="op">&lt;-</span> <span class="va">birth_year</span><span class="op">$</span><span class="va">impact</span></span>
<span><span class="va">calendar_year</span><span class="op">$</span><span class="va">impact_calendar_year</span> <span class="op">&lt;-</span> <span class="va">calendar_year</span><span class="op">$</span><span class="va">impact</span></span>
<span><span class="va">plot_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/merge.html" class="external-link">merge</a></span><span class="op">(</span><span class="va">birth_year</span>, <span class="va">calendar_year</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"country"</span>, <span class="st">"burden_outcome"</span>, <span class="st">"year"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">plot_data</span><span class="op">$</span><span class="va">year</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">plot_data</span><span class="op">$</span><span class="va">year</span>, <span class="st">"01"</span>, <span class="st">"01"</span>, sep <span class="op">=</span> <span class="st">"-"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">plot_data</span>, <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">year</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>y <span class="op">=</span> <span class="va">impact_birth_year</span>, colour <span class="op">=</span> <span class="st">"birth year"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>y <span class="op">=</span> <span class="va">impact_calendar_year</span>, colour <span class="op">=</span> <span class="st">"calendar year"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/expand_limits.html" class="external-link">expand_limits</a></span><span class="op">(</span>y <span class="op">=</span> <span class="fl">0</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ylab</a></span><span class="op">(</span><span class="st">"Impact"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">xlab</a></span><span class="op">(</span><span class="st">"Year"</span><span class="op">)</span></span></code></pre></div>
<p><img src="using-vimpact_files/figure-html/unnamed-chunk-4-1.png" width="700"></p>
</div>
<div class="section level2">
<h2 id="impact-by-year-of-vaccination">Impact by year of vaccination<a class="anchor" aria-label="anchor" href="#impact-by-year-of-vaccination"></a>
</h2>
<p>The final view of impact is by attributing it to the year in which vaccination took place. Impact by year of vaccination methods are vital for determining the long-term impact of of vaccination due to activities carried out in a particular year. We obtain the impact ratio as the impact attributable per fully vaccinated person (FVP) calculated as the coverage × cohort size. This ratio can be stratified by different characteristics, such as birth cohort in order to catch temporal changes in transmission or healthcare or by activity type to capture the differing effects of routine and campaign vaccination. The impact ratio allows effects due to a particular year’s worth of vaccination to be attributed to that year.</p>
<div class="section level3">
<h3 id="impact-by-year-of-vaccination-impact-ratio-stratified-by-activity-type">Impact by year of vaccination: impact ratio stratified by activity type<a class="anchor" aria-label="anchor" href="#impact-by-year-of-vaccination-impact-ratio-stratified-by-activity-type"></a>
</h3>
<p>To calculate impact by year of vaccination with impact ratio stratified by activity type use function <code>impact_by_year_of_vaccination_activity_type</code>. You need to provide 3 data frames. Like the previous two impact methods this needs a data frame of baseline impact and focal impact. These must contain the same columns as in the previous two methods with the addition of a column for the <code>activity_type</code> of the vaccination - either routine or campaign.</p>
<p>You also need to provide a data frame of FVP (fully vaccinated person) data which contains country, year, activity type, age and fvp. And a set of <code>vaccination_years</code> which is a range of years for which you want calculate impact for. This will be used to filter the baseline impact, focal impact and FVPs.</p>
<p>This method produces impact values for a particular disease stratified by country, activity type, year and burden outcome.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">example_fvps</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/example_fvps.csv"</span>, package <span class="op">=</span> <span class="st">"vimpact"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">routine</span> <span class="op">&lt;-</span> <span class="fu">vimpact</span><span class="fu">::</span><span class="fu"><a href="../reference/impact_by_year_of_vaccination_activity_type.html">impact_by_year_of_vaccination_activity_type</a></span><span class="op">(</span>baseline_burden <span class="op">=</span> <span class="va">example_novax</span>, focal_burden <span class="op">=</span> <span class="va">example_routine</span>, fvps <span class="op">=</span> <span class="va">example_fvps</span><span class="op">[</span><span class="va">example_fvps</span><span class="op">$</span><span class="va">activity_type</span> <span class="op">==</span> <span class="st">"routine"</span>,<span class="op">]</span>, <span class="fl">2000</span><span class="op">:</span><span class="fl">2030</span><span class="op">)</span></span>
<span></span>
<span><span class="va">campaign</span> <span class="op">&lt;-</span> <span class="fu">vimpact</span><span class="fu">::</span><span class="fu"><a href="../reference/impact_by_year_of_vaccination_activity_type.html">impact_by_year_of_vaccination_activity_type</a></span><span class="op">(</span>baseline_burden <span class="op">=</span> <span class="va">example_routine</span>, focal_burden <span class="op">=</span> <span class="va">example_routine_campaign</span>, fvps <span class="op">=</span> <span class="va">example_fvps</span><span class="op">[</span><span class="va">example_fvps</span><span class="op">$</span><span class="va">activity_type</span> <span class="op">==</span> <span class="st">"campaign"</span>,<span class="op">]</span>, <span class="fl">2000</span><span class="op">:</span><span class="fl">2030</span><span class="op">)</span></span>
<span></span>
<span><span class="va">activity_type</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">routine</span>, <span class="va">campaign</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">activity_type</span><span class="op">)</span></span>
<span><span class="co">#&gt; tibble [35 × 8] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;  $ country       : chr [1:35] "ABC" "ABC" "ABC" "ABC" ...</span></span>
<span><span class="co">#&gt;  $ vaccine       : chr [1:35] "YF" "YF" "YF" "YF" ...</span></span>
<span><span class="co">#&gt;  $ activity_type : chr [1:35] "routine" "routine" "routine" "routine" ...</span></span>
<span><span class="co">#&gt;  $ year          : int [1:35] 2004 2005 2006 2007 2008 2009 2010 2011 2012 2013 ...</span></span>
<span><span class="co">#&gt;  $ burden_outcome: chr [1:35] "deaths" "deaths" "deaths" "deaths" ...</span></span>
<span><span class="co">#&gt;  $ impact        : num [1:35] 184 323 404 478 479 ...</span></span>
<span><span class="co">#&gt;  $ impact_ratio  : num [1:35] 0.168 0.168 0.168 0.168 0.168 ...</span></span>
<span><span class="co">#&gt;  $ fvps          : int [1:35] 1090 1919 2397 2838 2842 4008 2971 2310 1494 2996 ...</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="impact-by-year-of-vaccination-impact-ratio-stratified-by-birth-cohort">Impact by year of vaccination: impact ratio stratified by birth cohort<a class="anchor" aria-label="anchor" href="#impact-by-year-of-vaccination-impact-ratio-stratified-by-birth-cohort"></a>
</h3>
<p>Impact by year of vaccination can be stratified by birth cohort to catch temporal changes in transmission or healthcare. This method is invariant to vaccination activity type. However, vaccine effect is assumed to vary over time through birth cohorts.</p>
<p>This method requires basline impact, focal impact and FVPs disaggregated by country, burden outcome, year and age. The data doesn’t have to be disaggregated by <code>activity_type</code>. This returns impact for a particular vaccine by country, year and burden outcome.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cohort_type</span> <span class="op">&lt;-</span> <span class="fu">vimpact</span><span class="fu">::</span><span class="fu"><a href="../reference/impact_by_year_of_vaccination_birth_cohort.html">impact_by_year_of_vaccination_birth_cohort</a></span><span class="op">(</span>baseline_burden <span class="op">=</span> <span class="va">example_novax</span>, focal_burden <span class="op">=</span> <span class="va">example_routine_campaign</span>, fvps <span class="op">=</span> <span class="va">example_fvps</span>, <span class="fl">2000</span><span class="op">:</span><span class="fl">2030</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">cohort_type</span><span class="op">)</span></span>
<span><span class="co">#&gt; tibble [35 × 7] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;  $ country       : chr [1:35] "ABC" "ABC" "ABC" "ABC" ...</span></span>
<span><span class="co">#&gt;  $ year          : int [1:35] 2013 2018 2019 2020 2021 2022 2023 2024 2004 2005 ...</span></span>
<span><span class="co">#&gt;  $ burden_outcome: chr [1:35] "deaths" "deaths" "deaths" "deaths" ...</span></span>
<span><span class="co">#&gt;  $ vaccine       : chr [1:35] "YF" "YF" "YF" "YF" ...</span></span>
<span><span class="co">#&gt;  $ activity_type : chr [1:35] "campaign" "campaign" "campaign" "campaign" ...</span></span>
<span><span class="co">#&gt;  $ impact        : num [1:35] 619 868 1314 1348 1891 ...</span></span>
<span><span class="co">#&gt;  $ fvps          : int [1:35] 9987 12378 18313 18310 25002 24999 24997 26681 1090 1919 ...</span></span></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">activity_sum</span> <span class="op">&lt;-</span> <span class="fu">stats</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/stats/aggregate.html" class="external-link">aggregate</a></span><span class="op">(</span><span class="va">impact</span> <span class="op">~</span> <span class="va">country</span> <span class="op">+</span> <span class="va">year</span> <span class="op">+</span> <span class="va">burden_outcome</span>,</span>
<span>                                 <span class="va">activity_type</span>, <span class="va">sum</span><span class="op">)</span></span>
<span><span class="va">cohort_sum</span> <span class="op">&lt;-</span> <span class="fu">stats</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/stats/aggregate.html" class="external-link">aggregate</a></span><span class="op">(</span><span class="va">impact</span> <span class="op">~</span> <span class="va">country</span> <span class="op">+</span> <span class="va">year</span> <span class="op">+</span> <span class="va">burden_outcome</span>,</span>
<span>                                 <span class="va">cohort_type</span>, <span class="va">sum</span><span class="op">)</span></span>
<span><span class="va">activity_sum</span><span class="op">$</span><span class="va">impact_activity_strat</span> <span class="op">&lt;-</span> <span class="va">activity_sum</span><span class="op">$</span><span class="va">impact</span></span>
<span><span class="va">cohort_sum</span><span class="op">$</span><span class="va">impact_cohort_strat</span> <span class="op">&lt;-</span> <span class="va">cohort_sum</span><span class="op">$</span><span class="va">impact</span></span>
<span><span class="va">plot_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/merge.html" class="external-link">merge</a></span><span class="op">(</span><span class="va">activity_sum</span>, <span class="va">cohort_sum</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"country"</span>, <span class="st">"burden_outcome"</span>, <span class="st">"year"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">plot_data</span><span class="op">$</span><span class="va">year</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">plot_data</span><span class="op">$</span><span class="va">year</span>, <span class="st">"01"</span>, <span class="st">"01"</span>, sep <span class="op">=</span> <span class="st">"-"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">plot_data</span>, <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">year</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>y <span class="op">=</span> <span class="va">impact_cohort_strat</span>, colour <span class="op">=</span> <span class="st">"cohort"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>y <span class="op">=</span> <span class="va">impact_activity_strat</span>, colour <span class="op">=</span> <span class="st">"activity"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/expand_limits.html" class="external-link">expand_limits</a></span><span class="op">(</span>y <span class="op">=</span> <span class="fl">0</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ylab</a></span><span class="op">(</span><span class="st">"Impact"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">xlab</a></span><span class="op">(</span><span class="st">"Year"</span><span class="op">)</span></span></code></pre></div>
<p><img src="using-vimpact_files/figure-html/unnamed-chunk-7-1.png" width="700"></p>
</div>
</div>
<div class="section level2">
<h2 id="glossary">Glossary<a class="anchor" aria-label="anchor" href="#glossary"></a>
</h2>
<p>All definitions and terminology can be found in the associated manuscript available at: <a href="https://www.medrxiv.org/content/10.1101/2021.01.08.21249378v1.full-text" class="external-link uri">https://www.medrxiv.org/content/10.1101/2021.01.08.21249378v1.full-text</a> ; we include a summary below.</p>
<p>FVP - Fully vaccinated person</p>
<p>Focal scenario - The vaccination scenario to be assessed in comparison to a baseline scenario</p>
<p>Baseline scenario - The vaccination scenario to be compared against, often the situation without any vaccination (no-vac)</p>
<p>Impact- The effect of vaccination often measure in deaths or cases averted and calculated as the difference in burden between a focal scenario and a baseline scenario</p>
<p>Impact ratios - The impact per fully vaccinated person</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Rich FitzJohn.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
